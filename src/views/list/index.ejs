<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search Results</title>
  <style>
    li {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    img {
      width: 32px;
      height: 32px;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <h1>Search Results</h1>
  <p>Tags: <% results.tags.forEach(tag => { %><a href="/list/<%= tag.name %>"><%= tag.name %></a> <% }) %></p>
  <p>Items:</p>
  <ul>
    <% results.items.forEach(item => { %>
      <li id="<%= item.id %>">
        <img src="/uploads/<%= item.image %>.avif" alt="<%= item.name %>">
        <a href="/item/<%= item.name %>"><%= item.name %></a>
        <button onclick='vote(["<%= item.id %>", "<%= results.tags.map(tag => tag.id).join(",") %>"], 1, "tag", "vote-<%= item.id %>")'>↑</button>
        <button onclick='vote(["<%= item.id %>", "<%= results.tags.map(tag => tag.id).join(",") %>"], 0, "tag", "vote-<%= item.id %>")'>↓</button>
        <span><%= item.up - item.down %></span>
        <span id="vote-<%= item.id %>"></span>
      </li>
    <% }) %>
  </ul>
  <a href="/">search</a>
  <script src="/js/vote.js"></script>
</body>
</html>

